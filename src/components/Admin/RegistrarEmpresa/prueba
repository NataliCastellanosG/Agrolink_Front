import React, {useState} from 'react';
import {Button, Checkbox, Col, Input, Form, Row, Select, Tooltip, Upload } from 'antd'
import {HomeOutlined, IdcardOutlined, LockOutlined, MailOutlined , PicRightOutlined, UploadOutlined, UserOutlined} from '@ant-design/icons';

import './RegisterForm.scss'


const normFile = (e) => {
    console.log('Upload event:', e);
  
    if (Array.isArray(e)) {
      return e;
    }
  
    return e && e.fileList;
  };

export default function RegisterForm(){

    const [inputs, setInputs] =useState({
        asociacionid: "",
        rolid:"",
        nombre:"",
        nit:"",
        representate_legal:"",
        cedula_representante_legal:"",
        correo_electronico:"",
        departamentoid:"",
        municipioid:"",
        direccion_empresa:"",
        certificado_camara_comercio:"",
        rut:"",
        resena:"",
        video_presentacion:"",
        constrasena:"",
        repeatconstrasena:"",
        privacyPolicy: false,
    })

    const changeForm = e =>{
        if(e.target.name ==="privacyPolicy"){
            setInputs({
                ...inputs,
                [e.target.name] : e.target.checked
            });
        }  else{
            if(e.target.name ==="asociacionid" || e.target.name ==="rolid" || e.target.name ==="departamentoid" || e.target.name ==="municipioid" ){
                setInputs({
                    ...inputs,
                    [e.target.name] : e.target.value
                })
                
            }
            else        
            {
                setInputs({
                    ...inputs,
                    [e.target.name] : e.target.value
                })
            }
        }
    };

    const registrarEmpresa = e=>{
        e.preventDefault();
        console.log(inputs);
    }



    const { Option } = Select;
    const { TextArea } = Input;
 
    return (
        <Form className="register-form" onSubmit={registrarEmpresa} onChange={changeForm}>
            <Row gutter={16}>
                <Col className="gutter-row" span={24}>
                    <Form.Item >
                        <Tooltip placement="right" title="Debe seleccionar la asociación a la que pertence su empresa">
                            <Select 
                                name="asociacionid"
                                /*hasFeedback
                                rules={[
                                {
                                    required: true,
                                    message: 'Seleccione una asociación',
                                },
                                ]}*/
                                className="register-form__select" 
                                placeholder="Asociación" >
                                    <Option value={inputs.asociacion}>Asociación 1</Option>
                                    <Option value={inputs.asociacion}>Asociación 2</Option>
                            </Select>
                        </Tooltip>
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col  className="gutter-row" span={8} >
                    <Form.Item 
                        /*
                        hasFeedback
                        rules={[
                        {
                            required: true,
                            message: 'Seleccione un rol',
                        },
                        ]*/>
                        <Tooltip placement="right" title="Debe seleccionar el rol que va a tener su empresa">
                            <Select name="rolid" className="register-form__input" placeholder="Seleccione un rol">
                                <Option value="comprador">Comprador</Option>
                                <Option value="vendedor">Vendedor</Option>
                            </Select>
                        </Tooltip>
                    </Form.Item>
                </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item
                        /*
                        hasFeedback
                        rules={[
                        {
                            required: true,
                            message: 'El nombre de la empresa es obligatorio'
                        },
                        ]}*/>
                        <Tooltip  placement="right" title="Debe diligenciar el nombre completo de su empresa">
                            <Input 
                                name="nombre"
                                prefix={<UserOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                                placeholder="Nombre de la empresa"
                                className="register-form__input"
                                value={inputs.nombre}/>
                        </Tooltip>
                    </Form.Item>
                </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item
                        /*hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'El NIT de la empresa es obligatorio'
                            },
                            ]}*/>
                        <Tooltip placement="right" title="Debe diligenciar el NIT de su empresa">
                            <Input
                                name="nit"
                                prefix={<IdcardOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                                placeholder="NIT"
                                className="register-form__input"/>
                        </Tooltip>
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col className="gutter-row" span={8}>
                    <Form.Item
                        
                        /*hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'El nombre del representante legal es obligatorio'
                            },
                            ]}*/>
                            <Tooltip placement="right" title="Debe diligenciar el nombre del representante legal de su empresa">
                                <Input
                                    name="representante_legal"
                                    prefix={<UserOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                                    placeholder="Representante legal"
                                    className="register-form__input"/>
                            </Tooltip>
                    </Form.Item>
                </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item
                        
                        /*hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'La cédula del representante legal es obligatoria'
                            },
                            ]}*/>
                            <Tooltip placement="right" title="Debe diligenciar la cédula del representante legal de su empresa">
                                <Input
                                    name="cedula_representante_legal"
                                    prefix={<IdcardOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                                    placeholder="Cédula representante legal"
                                    className="register-form__input"/>
                            </Tooltip>
                        
                    </Form.Item>
                </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item
                        /*hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'El correo electrónico es obligatorio'
                            },
                            {
                                type: 'email',
                                message: 'El formato no coincide con un correo electrónico'
                            }
                            ]}*/>
                            <Tooltip placement="right" title="Debe diligenciar el correo electrónico que este asociado al proceso">
                                <Input
                                    name="correo_electronico"
                                    prefix={<MailOutlined  style={{ color: "rgba(0,0,0,0.25)"}} />}
                                    placeholder="Correo electrónico"
                                    className="register-form__input"/>
                            </Tooltip>
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col className="gutter-row" span={8}>
                        <Form.Item 
                            /*hasFeedback
                            rules={[
                            {
                                required: true,
                                message: 'Seleccione un departamento',
                            },
                            ]}*/>
                            <Tooltip placement="right" title="Debe Seleccionar el departamento donde reside su empresa">
                                <Select name="departamentoid" placeholder="Departamento">
                                    <Option value="Caldas">Caldas</Option>
                                    <Option value="Antioquia">Antioquia</Option>
                                </Select>
                            </Tooltip>
                        </Form.Item>
                    </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item 
                        /*
                        hasFeedback
                        rules={[
                        {
                            required: true,
                            message: 'Seleccione un municipio',
                        },
                        ]}*/>
                        <Tooltip placement="right" title="Debe Seleccionar el municipio donde reside su empresa">
                            <Select name="municipioid" placeholder="Municipio">
                                <Option value="china">Asociación 1</Option>
                                <Option value="usa">Asociación 2</Option>
                            </Select>
                        </Tooltip>
                    </Form.Item>
                </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item
                        /*
                        hasFeedback
                        rules={[
                        {
                            required: true,
                            message: 'La dirección es obligatoria',
                        },
                        ]}*/>
                        <Tooltip placement="right" title="Debe diligenciar la dirección de su empresa">
                            <Input
                                name="direccion_empresa"
                                prefix={<HomeOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                                placeholder="dirección donde reside la empresa"
                                className="register-form__input"/>
                        </Tooltip>
                    </Form.Item>
                </Col>
            </Row>

            {/*<Row gutter={16}>
                <Col className="gutter-row" span={16}>
                    <Form.Item
                        name="certificado_camara_comercio" 
                        hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'Seleccione un archivo',
                                
                            }
                            ]}
                        valuePropName="file"
                        getValueFromEvent={normFile}>
                        <Tooltip placement="right" title="Debe cargar el documento pdf del certificado de Cámara y Comercio de su empresa">
                            <Upload name="logo" action="/upload.do" listType="text">
                                <Button style={{width:'100%'}} icon={<UploadOutlined />}>Cargar el certificado de Cámara y Comercio</Button>
                            </Upload>
                        </Tooltip>  
                    </Form.Item>                    
                </Col>
                <Col className="gutter-row" span={8}>
                    <Form.Item style={{width:'100%'}}
                        name="certificado_camara_comercio" 
                        hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'Seleccione un archivo',
                            }
                            ]}
                        valuePropName="file"
                        getValueFromEvent={normFile}>
                        <Tooltip placement="right" title="Debe cargar el documento pdf del RUT de su empresa">
                            <Upload  name="logo" action="/upload.do" listType="text">
                                <Button style={{width:'100%'}}  icon={<UploadOutlined />}>Cargar el RUT</Button>
                            </Upload>
                        </Tooltip>
                    </Form.Item>                    
                </Col>
                        </Row>*/}
            <Row gutter={16}>
                <Col className="gutter-row" span={12}>
                    <Form.Item
                        /*hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'La reseña es obligatoria',
                            },
                            ]}*/>
                        <Tooltip placement="right" title="Debe diligenciar la reseña o descripción de su empresa">
                            <TextArea 
                                name="resena"
                                rows={1}
                                icon={<PicRightOutlined  style={{ color: "rgba(0,0,0,0.25)"}} />}
                                placeholder="Reseña"
                                className="register-form__input"
                                maxLength = {300}/>
                        </Tooltip>
                    </Form.Item> 
                </Col>
                <Col className="gutter-row" span={12}>
                    <Form.Item hasFeedback>
                        <Tooltip placement="right" title="Debe ingresar el enlace del youtube en el que se encuentra el video de presentación de su empresa">
                            <Input
                                name="video_presentacion"
                                prefix={<UserOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                                placeholder="URL de youtube  - video de presentación"
                                className="register-form__input"/>
                        </Tooltip>
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col className="gutter-row" span={12}>
                    <Form.Item
                        /*
                        hasFeedback
                        rules={[
                            {
                                required: true,
                                message: 'Seleccione una asociación',
                                
                            }
                        ]}*/>
                        <Tooltip placement="right" title="Ingrese una contraseña segura para acceder a la plataforma">
                            <Input.Password
                                name="constrasena"
                                prefix={<LockOutlined style={{color: "rgba(0,0,0,0.25)"}}/> }
                                placeholder="Constraseña"
                                className="register-form__input"/>
                        </Tooltip>
                    </Form.Item> 
                </Col>
                <Col className="gutter-row" span={12}>
                    <Form.Item
                        /*dependencies={['constrasena']}
                        hasFeedback
                        rules={[
                            {
                            required: true,
                            message: 'Repetir contraseña',
                            },
                            ({ getFieldValue }) => ({
                            validator(_, value) {
                                if (!value || getFieldValue('constrasena') === value) {
                                return Promise.resolve();
                                }
                                return Promise.reject(new Error('Ambas contraseñas deben coincidir'));
                            },
                            })]}*/>
                        <Tooltip placement="right" title="Ingrese nuevamente la contraseña">
                            <Input.Password
                                name="repeatconstrasena"
                                prefix={<LockOutlined style={{color: "rgba(0,0,0,0.25)"}}/>}
                                placeholder="Repetir contraseña"
                                className="register-form__input"/>
                        </Tooltip>
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col className="gutter-row" span={24} style={{textAlign:'left'}}>
                    <Form.Item
                    /*
                        rules={[
                            {
                            validator: (_, value) =>
                                value ? Promise.resolve() : Promise.reject(new Error('Should accept agreement')),
                            },
                        ]}*/>
                            <Checkbox name="privacyPolicy">
                                He leído y acepto la política de privacidad
                            </Checkbox>
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col className="gutter-row" span={24}>
                    <Form.Item>
                        <Button htmlType="submit" className="register-form_button">
                            Finalizar registro
                        </Button>
                    </Form.Item>
                </Col>
            </Row>
        </Form>
    );
}


return (
        <Form className="sesion-form" onFinish={sesionEmpresa} onChange={changeForm}>
            <Row gutter={16}>
                <Col className="gutter-row" span={24}>
                    <Form.Item>
                        <Input 
                            name="correo_electronico"
                            prefix={<UserOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                            placeholder="Correro electrónico"
                            className="sesion-form__input"
                            //value={inputs.correo_electronico}
                            />
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col  className="gutter-row" span={24} >
                    <Form.Item>
                        <Input 
                            name="contrasena"
                            type="password"
                            prefix={<LockOutlined style={{ color: "rgba(0,0,0,0.25)"}} />}
                            placeholder="Contraseña"
                            className="sesion-form__input"
                            //value={inputs.contrasena}
                            />
                    </Form.Item>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col  className="gutter-row" span={24} >
                    <Typography variant="h5" className="sesion-form__texto">¿Olvidó su contraseña?</Typography>
                </Col>
            </Row>
            <Row gutter={16}>
                <Col className="gutter-row" span={24}>
                    <Form.Item>
                        <Button htmlType="submit" className="sesion-form__button">
                            INICIAR SESIÓN
                        </Button>
                    </Form.Item>
                </Col>
            </Row>
        </Form>
    );